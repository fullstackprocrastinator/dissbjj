<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DISS BJJ - Brazilian Jiu-Jitsu Club in Diss, Norfolk</title>
    <link rel="stylesheet" href="css/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
    <header>
        <div class="container">
            <div class="logo">
                <img src="img/logo.png" alt="DISS BJJ Logo">
            </div>
            <nav>
                <ul>
                    <li><a href="#home">Home</a></li>
                    <li><a href="#about">About</a></li>
                    <li><a href="#classes">Classes</a></li>
                    <li><a href="#gallery">Gallery</a></li>
                    <li><a href="#contact">Contact</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main>
        <section id="home" class="hero">
            <div class="hero-content">
                <h1>Join the DISS BJJ Family</h1>
                <p>Train with the Best in Norfolk</p>
                <a href="#about" class="btn">Learn More</a>
            </div>
        </section>

        <section id="about" class="section">
            <div class="container">
                <h2>About Us</h2>
                <p>DISS BJJ is a premier Brazilian Jiu-Jitsu club located in Diss, Norfolk. Founded in 2010 by black belt instructor John Doe, we offer classes for all levels, from beginners to advanced competitors. Our mission is to promote the art of BJJ and build a strong community.</p>
                <img src="img/instructor.jpg" alt="Instructor John Doe">
            </div>
        </section>

        <section id="video" class="section">
        <div class="container">
            <h2>Latest Video from Grappling Community</h2>
            <div id="video-container">
                <!-- Loading spinner will appear here temporarily -->
                <div id="video-placeholder" style="display: flex; justify-content: center; align-items: center; height: 340px; background: #1e1e1e;">
                    <div class="spinner"></div>
                </div>
            </div>
        </div>
    </section>
        <script>
        // YouTube API solution
        const loadLatestVideo = async () => {
            const container = document.getElementById('video-container');
            const placeholder = document.getElementById('video-placeholder');
            
            try {
                // First try with playlist method
                const playlistResponse = await fetch(
                    `https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&playlistId=UU4eX8vGclH3o1aW1wTFvZA&maxResults=1&key=AIzaSyD5eW9qRzq1mJ4s6Xq7W7ZvJ8d9Q0wT7bE`
                );
                
                const playlistData = await playlistResponse.json();
                
                if (playlistData.items && playlistData.items.length > 0) {
                    const videoId = playlistData.items[0].snippet.resourceId.videoId;
                    showVideo(videoId);
                    return;
                }
                
                // Fallback to channel method if playlist fails
                const channelResponse = await fetch(
                    `https://www.googleapis.com/youtube/v3/search?part=snippet&channelId=UC4eX8vGclH3o1aW1wTFvZA&maxResults=1&order=date&type=video&key=AIzaSyD5eW9qRzq1mJ4s6Xq7W7ZvJ8d9Q0wT7bE`
                );
                
                const channelData = await channelResponse.json();
                
                if (channelData.items && channelData.items.length > 0) {
                    const videoId = channelData.items[0].id.videoId;
                    showVideo(videoId);
                } else {
                    showError();
                }
            } catch (error) {
                console.error("Error fetching video:", error);
                showError();
            }
        };

        const showVideo = (videoId) => {
            const container = document.getElementById('video-container');
            const placeholder = document.getElementById('video-placeholder');
            
            placeholder.style.display = 'none';
            
            const iframe = document.createElement('iframe');
            iframe.width = '100%';
            iframe.height = '340';
            iframe.src = `https://www.youtube.com/embed/${videoId}`;
            iframe.frameBorder = '0';
            iframe.allow = 'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture';
            iframe.allowFullscreen = true;
            iframe.style.display = 'block';
            
            container.appendChild(iframe);
        };

        const showError = () => {
            const container = document.getElementById('video-container');
            const placeholder = document.getElementById('video-placeholder');
            
            placeholder.innerHTML = `
                <div style="text-align: center; padding: 20px;">
                    <p>Couldn't load latest video. Visit our 
                        <a href="https://www.youtube.com/@grapplingcommunity2606" 
                           target="_blank" 
                           style="color: #ff0000; text-decoration: none;">
                            YouTube Channel
                        </a>
                    </p>
                    <iframe width="100%" height="340" 
                            src="https://www.youtube.com/embed/8S9dTAc7mDk" 
                            frameborder="0" 
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                            allowfullscreen>
                    </iframe>
                </div>
            `;
        };

        // Initialize when DOM is loaded
        document.addEventListener('DOMContentLoaded', loadLatestVideo);
    </script>

        <section id="classes" class="section">
            <div class="container">
                <h2>Classes</h2>
                <div class="classes-grid">
                    <div class="class-card">
                        <h3>No-GI</h3>
                        <p>Fridays at 1920</p>
                    </div>
                    <div class="class-card">
                        <h3>GI</h3>
                        <p>Saturdays at 0900</p>
                </div>
            </div>
        </section>
    </div>

        <section id="gallery" class="section">
            <div class="container">
                <h2>Gallery</h2>
                <div class="gallery-grid">
                    <img src="img/gallery1.jpg" alt="Training Session">
                    <img src="img/gallery2.jpg" alt="Competition">
                    <img src="img/gallery3.jpg" alt="Community Event">
                    <img src="img/gallery4.jpg" alt="Club Members">
                </div>
            </div>
        </section>

        <section id="contact" class="section">
            <div class="container">
                <h2>Contact Us</h2>
                <form action="https://formspree.io/your-email" method="POST">
                    <input type="text" name="name" placeholder="Your Name" required>
                    <input type="email" name="email" placeholder="Your Email" required>
                    <textarea name="message" placeholder="Your Message" required></textarea>
                    <button type="submit" class="btn">Send Message</button>
                </form>
                <div class="map">
                    <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2435.441656108887!2d1.1171401!3d52.3805435!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x47d9c0f2691c3dbd%3A0x753ef974239f9ed1!2sHeywood%20Sports%20%26%20Fitness!5e0!3m2!1sen!2suk!4v1748894757558!5m2!1sen!2suk" width="800
                " height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2025 DISS BJJ. All rights reserved.</p>
            <div class="social-media">
                <a href="https://www.youtube.com/@grapplingcommunity2606" target="_blank">YouTube</a>
                <!-- Add other social media links as needed -->
            </div>
        </div>
    </footer>

    <script src="js/main.js"></script>
</body>
</html>
